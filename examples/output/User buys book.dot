digraph G {
compound=true;
    subgraph cluster1 {
    label="User buys book";
    color="Black";
        node14 [label="DHL" shape="box", margin="0.1", color="Grey"];
        subgraph cluster2 {
        label="AWS";
        color="Coral1";
            subgraph cluster3 {
            label="FE VPC";
            color="Coral1";
                node4 [label="Nginx" shape="box", margin="0.1", color="Grey"];
            }
            subgraph cluster7 {
            label="Backend VPC";
            color="Coral1";
                node8 [label="Ordering" shape="box", margin="0.1", color="Grey"];
            }
        }
        subgraph cluster5 {
        label="Internet";
        color="Coral1";
            node6 [label="client" shape="box", margin="0.1", color="Grey"];
        }
        subgraph cluster9 {
        label="Warehouse Systems";
        color="Coral1";
            node10 [label="Warehouse" shape="box", margin="0.1", color="Grey"];
            node13 [label="Shipping" shape="box", margin="0.1", color="Grey"];
        }
        subgraph cluster11 {
        label="OCI";
        color="Coral1";
            node12 [label="Database" shape="box", margin="0.1", color="Grey"];
        }
    }
node6->node4 [label="1 POST /buy?bookid=3" fontsize="10",penwidth="1.2",arrowsize="0.8"];
node4->node8 [label="2 User X buys book3" fontsize="10",penwidth="1.2",arrowsize="0.8"];
node8->node10 [label="3 Start picking book3 for customer X" fontsize="10",penwidth="1.2",arrowsize="0.8"];
node10->node12 [label="4 Get address for customer X" fontsize="10",penwidth="1.2",arrowsize="0.8"];
node12->node10 [label="5 Customer address" fontsize="10",penwidth="1.2",arrowsize="0.8"];
node10->node13 [label="6 Prepare invoice for shipping to address" fontsize="10",penwidth="1.2",arrowsize="0.8"];
node13->node14 [label="7 Ship Order" fontsize="10",penwidth="1.2",arrowsize="0.8"];
}